<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Verification System</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Connection Status Indicator -->
    <div id="connectionStatus" class="connection-status connection-offline">
        Connecting...
    </div>

    <nav class="nav">
        <div class="nav-content">
            <div class="logo">Smart Verification System</div>
            <div class="nav-buttons">
                <button class="btn btn-primary" onclick="showHome()">Home</button>
                <button class="btn btn-secondary" onclick="showLogin()">Login</button>
                <button class="btn btn-danger" onclick="logout()" id="logoutBtn" style="display: none;">Logout</button>
            </div>
        </div>
    </nav>

    <div class="container">
        <!-- Home Page -->
        <div id="homePage" class="card">
            <h1 style="color: #0254d8; text-align: center; margin-bottom: 1rem;">Welcome to Smart Verification System</h1>
            <p style="text-align: center; font-size: 1.1rem; margin-bottom: 2rem;">Secure RFID + Fingerprint Authentication System</p>
            
            <div class="role-selector">
                <div class="role-card" onclick="showRegistration('student')">
                    <h3>üë®‚Äçüéì Student</h3>
                    <p>Register for campus access</p>
                </div>
                <div class="role-card teacher" onclick="showRegistration('teacher')">
                    <h3>üë®‚Äçüè´ Teacher/Lecturer</h3>
                    <p>Register and manage system</p>
                </div>
            </div>
        </div>

        <!-- Registration Form -->
        <div id="registrationPage" class="card hidden">
            <h2 id="registrationTitle" style="color: #0254d8; margin-bottom: 1.5rem;">Registration</h2>
            
            <form id="registrationForm">
                <input type="hidden" id="userRole" name="role">
                
                <div class="form-group">
                    <label for="fullName">Full Name</label>
                    <input type="text" id="fullName" name="fullName" required>
                </div>

                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input type="email" id="email" name="email" required>
                </div>

                <!-- Student Fields -->
                <div id="studentFields" class="hidden">
                    <div class="form-group">
                        <label for="matricNumber">Matriculation Number</label>
                        <input type="text" id="matricNumber" name="matricNumber" placeholder="e.g., CSC/2024/001">
                    </div>

                    <div class="form-group">
                        <label for="faculty">Faculty</label>
                        <select id="faculty" name="faculty" onchange="updateDepartments()">
                            <option value="">Select Faculty</option>
                            <option value="technology">Technology</option>
                            <option value="science">Science</option>
                            <option value="arts">Arts</option>
                            <option value="health_sciences">Health Sciences</option>
                            <option value="pharmacy">Pharmacy</option>
                            <option value="law">Law</option>
                            <option value="social_sciences">Social Sciences</option>
                            <option value="education">Education</option>
                            <option value="computing">Computing</option>
                            <option value="agriculture">Agriculture</option>
                            <option value="environmental_design_and_management">Environmental Design and Management</option>
                            <option value="dentistry">Dentistry</option>
                            <option value="administration">Administration</option>
                            <option value="business">Business</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="department">Department</label>
                        <select id="department" name="department">
                            <option value="">Select Faculty First</option>
                        </select>
                    </div>
                </div>

                <!-- Teacher Fields -->
                <div id="teacherFields" class="hidden">
                    <div class="form-group">
                        <label for="staffId">Staff ID</label>
                        <input type="text" id="staffId" name="staffId" placeholder="e.g., STAFF001">
                    </div>

                    <div class="form-group">
                        <label for="designation">Designation</label>
                        <select id="designation" name="designation">
                            <option value="">Select Designation</option>
                            <option value="lecturer">Lecturer</option>
                            <option value="professor">Professor</option>
                        </select>
                    </div>
                </div>

                <!-- RFID Card -->
                <div class="form-group">
                    <label for="cardUID">RFID Card UID</label>
                    <div style="display: flex; gap: 10px;">
                        <input type="text" id="cardUID" name="cardUID" placeholder="Click scan to get RFID card UID" readonly style="flex: 1;">
                        <button type="button" class="btn btn-secondary" onclick="scanRFID()">üè∑Ô∏è Scan RFID</button>
                    </div>
                </div>

                <!-- Fingerprint -->
                <div class="form-group">
                    <label>Fingerprint Registration</label>
                    <div id="fingerprintStatus" class="fingerprint-status">
                        Ready to register fingerprint
                    </div>
                    <button type="button" class="btn btn-primary" id="fingerprintBtn" onclick="registerFingerprint()">üëÜ Register Fingerprint</button>
                </div>

                <div class="form-group">
                    <button type="submit" class="btn btn-primary">Complete Registration</button>
                    <button type="button" class="btn btn-secondary" onclick="showHome()">Cancel</button>
                </div>
            </form>
        </div>

        <!-- Login Page -->
        <div id="loginPage" class="card hidden">
            <h2 style="color: #0254d8; margin-bottom: 1.5rem;">Teacher/Lecturer Login</h2>
            
            <div style="margin-bottom: 2rem; padding: 15px; background-color: rgba(2, 84, 216, 0.1); border-radius: 10px; border-left: 4px solid #0254d8;">
                <h4 style="color: #0254d8; margin-bottom: 10px;">Sample Login Credentials:</h4>
                <p style="font-size: 14px; margin: 5px 0;"><strong>Email:</strong> john.smith@university.edu</p>
                <p style="font-size: 14px; margin: 5px 0;"><strong>Fingerprint:</strong> teacher_fingerprint_1</p>
                <p style="font-size: 14px; margin: 5px 0;"><strong>Or Email:</strong> sarah.johnson@university.edu</p>
                <p style="font-size: 14px; margin: 5px 0;"><strong>Fingerprint:</strong> teacher_fingerprint_2</p>
            </div>
            
            <form id="loginForm">
                <div class="form-group">
                    <label for="loginEmail">Email Address</label>
                    <input type="email" id="loginEmail" name="email" required>
                </div>

                <div class="form-group">
                    <label>Fingerprint Authentication</label>
                    <div id="loginFingerprintStatus" class="fingerprint-status">
                        Ready for fingerprint authentication
                    </div>
                    <button type="button" class="btn btn-primary" id="loginFingerprintBtn" onclick="authenticateFingerprint()">üëÜ Authenticate</button>
                </div>

                <div class="form-group">
                    <button type="submit" class="btn btn-primary">Login</button>
                    <button type="button" class="btn btn-secondary" onclick="showHome()">Cancel</button>
                </div>
            </form>
        </div>

        <!-- Teacher Dashboard -->
        <div id="teacherDashboard" class="hidden">
            <div class="card">
                <h2 style="color: #0254d8; margin-bottom: 1.5rem;">Teacher Dashboard</h2>
                
                <div style="margin-bottom: 2rem;">
                    <h4 id="welcomeMessage" style="color: #0254d8;">Welcome!</h4>
                </div>
                
                <div class="dashboard-stats">
                    <div class="stat-card">
                        <div class="stat-number" id="totalStudents">0</div>
                        <div>Total Students</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="todayAttendance">0</div>
                        <div>Today's Attendance</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="totalAttendance">0</div>
                        <div>Total Records</div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                    <h3>Recent Attendance Records</h3>
                    <button class="btn btn-secondary" onclick="loadDashboardData()" style="font-size: 12px;">üîÑ Refresh</button>
                </div>
                
                <table class="attendance-table" id="attendanceTable">
                    <thead>
                        <tr>
                            <th>Date/Time</th>
                            <th>Student Name</th>
                            <th>ID Number</th>
                            <th>Faculty</th>
                            <th>Department</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="attendanceTableBody">
                        <tr>
                            <td colspan="6" style="text-align: center; color: #666;">Loading attendance data...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Include separate JavaScript file -->
    <script src="app.js"></script>
</body>
</html>
